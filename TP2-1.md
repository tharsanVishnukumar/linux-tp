# [LP LPW 2026] Compte rendu TP2 UNIX : Services, processus, signaux

**Nom :** Vishnukumar
**Prénom :** Tharsan
**N° d'étudiant :** 21530107

## 1. Secure Shell: SSH

### 1.1 Connexion SSH Root

J'ai installé le serveur OpenSSH et configuré l'accès root.

**Commandes effectuées :**

```bash
apt update
apt search openssh-server
apt install openssh-server

```

Modification du fichier de configuration :

```bash
vim /etc/ssh/sshd_config

```

J'ai modifié la ligne `PermitRootLogin` pour la passer à `yes`.

**Explication `sshd_config` :**
L'option `PermitRootLogin` contrôle si l'utilisateur root peut se connecter via SSH.

* `yes` : Autorise la connexion root (risqué si le mot de passe est faible).
* `prohibit-password` (ou `without-password`) : Autorise root uniquement via clés SSH (plus sécurisé).
* `no` : Interdit toute connexion directe en root.

<img width="566" height="172" alt="image" src="https://github.com/user-attachments/assets/d94bed25-7628-4848-a8ac-e08208004ca8" />

### 1.2 Authentification par clé (Génération)

Sur ma machine hôte, j'ai généré une paire de clés sans passphrase (comme demandé pour le TP, bien que déconseillé en production car si la clé privée est volée, l'attaquant a un accès immédiat).

**Commande (sur la machine hôte) :**

```bash
ssh-keygen -t rsa -b 4096

```

*(Ou `ssh-keygen -t ed25519` pour une clé plus moderne).*

<img width="800" height="467" alt="image" src="https://github.com/user-attachments/assets/d82b2872-84fa-4920-a031-180dc0b4fbd8" />

### 1.3 Authentification par clé (Installation sur le serveur)

J'ai copié ma clé publique manuellement sur le serveur pour comprendre le mécanisme.

1. Création du dossier `.ssh` :
```bash
mkdir /root/.ssh

```


2. Création du fichier `authorized_keys` et ajout de la clé publique (copiée depuis l'hôte) :
```bash
vim /root/.ssh/authorized_keys

```
<img width="1885" height="132" alt="image" src="https://github.com/user-attachments/assets/7200f1b8-d96d-4fba-a403-32b8326ca10e" />


3. Attribution des permissions strictes (nécessaires pour qu'OpenSSH accepte la clé) :
```bash
chmod 700 /root/.ssh
chmod 600 /root/.ssh/authorized_keys

```


<img width="608" height="199" alt="image" src="https://github.com/user-attachments/assets/daf4cfcf-5b25-4ad6-8903-4e39ddfbd1b0" />

### 1.4 Connexion depuis la machine hôte

Je me suis connecté en utilisant la clé privée correspondante.

**Commande :**

```bash
ssh -i maclef root@ip_du_serveur

```

<img width="886" height="237" alt="image" src="https://github.com/user-attachments/assets/bb298a61-5625-41cf-a1b1-93592d3fc9e0" />

### 1.5 Sécurisation

Pour sécuriser l'accès, j'ai désactivé l'authentification par mot de passe pour ne laisser que l'authentification par clé.

**Modification dans `/etc/ssh/sshd_config` :**

* `PermitRootLogin prohibit-password` (ou `without-password`)
* `PasswordAuthentication no`

<img width="476" height="137" alt="image" src="https://github.com/user-attachments/assets/e762aea9-b496-430f-96ca-9644a06bc782" />


**Attaque Brute Force SSH :**
Une attaque brute force consiste à tester automatiquement des milliers de combinaisons d'identifiants et de mots de passe pour deviner les accès.

**Autres protections possibles :**

* **Fail2Ban :** Bannit les IP après plusieurs échecs de connexion.
* **Changement de port :** Changer le port 22 par défaut pour éviter les scans automatiques.
* **AllowUsers :** Restreindre l'accès à une liste précise d'utilisateurs dans la configuration.

---

[TP2-2](TP2-2.md)
